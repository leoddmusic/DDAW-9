{% extends "base.html" %}
{% block content %}
<div class="header-actions">
  <h1>Productos (MySQL)</h1>
  <div>
    <a class="btn" href="{{ url_for('mysql_productos_crear') }}">Crear producto (MySQL)</a>
    <a class="btn outline" href="{{ url_for('home') }}">Volver al Inventario (SQLite)</a>
  </div>
</div>

<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Precio</th>
      <th>Stock</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for p in productos %}
    <tr class="{{ 'alt' if loop.index is even }}">
      <td>{{ p.id_producto }}</td>
      <td>{{ p.nombre }}</td>
      <td>${{ '%.2f'|format(p.precio|float) }}</td>
      <td>{{ p.stock }}</td>
      <td class="actions">
        <!-- ðŸ‘‡ OJO: usar pid= en lugar de id_producto= -->
        <a class="btn btn-small" href="{{ url_for('mysql_productos_editar', pid=p.id_producto) }}">Editar</a>

        <form action="{{ url_for('mysql_productos_eliminar', pid=p.id_producto) }}" method="post" style="display:inline">
          <button class="btn btn-danger btn-small" onclick="return confirm('Â¿Eliminar producto #{{ p.id_producto }}?')">Eliminar</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr><td colspan="5" style="text-align:center">No hay productos.</td></tr>
    {% endfor %}
  </tbody>
</table>

<!-- PaginaciÃ³n -->
{% if total_pages and total_pages > 1 %}
<nav class="pagination">
  {% if prev_url %}<a class="page" href="{{ prev_url }}">&laquo; Anterior</a>{% else %}<span class="page disabled">&laquo; Anterior</span>{% endif %}
  <span class="page current">PÃ¡gina {{ page }} / {{ total_pages }}</span>
  {% if next_url %}<a class="page" href="{{ next_url }}">Siguiente &raquo;</a>{% else %}<span class="page disabled">Siguiente &raquo;</span>{% endif %}
</nav>
{% endif %}
{% endblock %}
